psql -h localhost -p 5434 -U sirene -d stats_sirene -c "DROP TABLE association"
psql -h localhost -p 5434 -U sirene -d stats_sirene -f "./create_table_association.sql"
export PGPASSWORD=password && psql -h localhost -p 5434 -U sirene stats_sirene -c "\copy association(id,id_ex,siret,rup_mi,gestion,date_creat,date_decla,date_publi,date_disso,nature,groupement,titre,titre_court,objet,objet_social1,objet_social2,adrs_complement,adrs_numvoie,adrs_repetition,adrs_typevoie,adrs_libvoie,adrs_distrib,adrs_codeinsee,adrs_codepostal,adrs_libcommune,adrg_declarant,adrg_complemid,adrg_complemgeo,adrg_libvoie,adrg_distrib,adrg_codepostal,adrg_achemine,adrg_pays,dir_civilite,siteweb,publiweb,observation,position,maj_time,mois_crea,mois_ferm,objet_social_parent_id,objet_social_lib,objet_social_parent_lib,reg,dep) FROM '/home/debian/datalake/sirene/2020-08/global_rna.csv' delimiter ',' csv header encoding 'UTF8';"
export PGPASSWORD=password && psql -h localhost -p 5434 -U sirene stats_sirene -c "CREATE INDEX assoc_reg ON association (reg);"
export PGPASSWORD=password && psql -h localhost -p 5434 -U sirene stats_sirene -c "CREATE INDEX assoc_dep ON association (dep);"
export PGPASSWORD=password && psql -h localhost -p 5434 -U sirene stats_sirene -c "CREATE INDEX assoc_osp ON association (objet_social_parent_id);"
export PGPASSWORD=password && psql -h localhost -p 5434 -U sirene stats_sirene -c "CREATE INDEX assoc_os ON association (objet_social1);"
export PGPASSWORD=password && psql -h localhost -p 5434 -U sirene stats_sirene -c "CREATE INDEX assoc_mc ON association (mois_crea);"
export PGPASSWORD=password && psql -h localhost -p 5434 -U sirene stats_sirene -c "CREATE INDEX assoc_mf ON association (mois_ferm);"
export PGPASSWORD=password && psql -h localhost -p 5434 -U sirene stats_sirene -c "CREATE INDEX assoc_insee ON association (adrs_codeinsee);"